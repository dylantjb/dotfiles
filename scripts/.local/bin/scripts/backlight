#!/usr/bin/env bash

# You can call this script like this:
# $ ./backlight up
# $ ./backlight down

# Script inspired by these wonderful people:
# https://github.com/dastorm/volume-notification-dunst/blob/master/volume.sh
# https://gist.github.com/sebastiencs/5d7227f388d93374cebdf72e783fbd6a
# https://gist.github.com/Blaradox/030f06d165a82583ae817ee954438f2e


get_icon() {
  level="$(get_brightness)"
  case 1 in
    $((level > 0 && level < 10))    ) echo \
      "/usr/share/icons/Papirus-Dark/48x48/status/notification-display-brightness-off.svg" ;;
    $((level >= 10 && level < 30))  ) echo \
      "/usr/share/icons/Papirus-Dark/48x48/status/notification-display-brightness-medium.svg" ;;
    $((level >= 30 && level < 70))  ) echo \
      "/usr/share/icons/Papirus-Dark/48x48/status/notification-display-brightness-high.svg" ;;
    $((level >= 70 && level <= 100)) ) echo \
      "/usr/share/icons/Papirus-Dark/48x48/status/notification-display-brightness-full.svg" ;;
    *) echo "/usr/share/icons/Papirus-Dark/48x48/status/notification-display-brightness-off.svg" ;;
  esac
}

get_brightness() { light -G | cut -d '.' -f 1 ; }
send_notification() { dunstify "Brightness [$(get_brightness)%] " -i "$(get_icon)" -r 5555 -u low -h int:value:"$(get_brightness)"; }

case "$1" in
  up)
    # increase the backlight by 10%
    light -A 10
    send_notification
    ;;
  down)
    # decrease the backlight by 10%
    light -U 10
    send_notification
    ;;
esac
