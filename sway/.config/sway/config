# vim:fileencoding=utf-8:ft=conf:foldmethod=marker
#   _____      ____ _ _   _
#  / __\ \ /\ / / _` | | | |
#  \__ \\ V  V / (_| | |_| |
#  |___/ \_/\_/ \__,_|\__, |
#                     |___/
#

#: Definitions {{{
set {
    $term        kitty
    $mod         Mod4
    $alt         Mod1
}
#: }}}

#: Initialise {{{
font pango:SF Pro Display

exec_always {
    background
    ~/.config/waybar/waybar.sh
    ! pgrep -x autotiling && autotiling
    ! pgrep -x dunst && dunst
}

exec {
    redshift -l 51.5:0
    xrdb -load ~/.Xresources
    mylock safe-mode
}
#: }}}

#: Gaps {{{
smart_gaps on
smart_borders on
gaps inner 10
default_border pixel 2

# use Mouse+$mod to drag floating windows
floating_modifier $mod normal
#: }}}

#: Manage specific apps {{{
for_window {
    [app_id="floaterm"] floating enable
    [app_id="telegramdesktop"] urgent enable
    [class="Spotify"] move to workspace 9, urgent enable

    [window_role="pop-up"] floating enable
    [window_role="bubble"] floating enable
    [window_role="task_dialog"] floating enable
    [window_role="Preferences"] floating enable
    [window_type="dialog"] floating enable
    [window_type="menu"] floating enable
}

assign {
    [app_id="telegramdesktop"] workspace 8
    [class="discord"]          workspace 8
}
#: }}}

#: Key bindings {{{
bindsym {
    # starts a terminal
    $mod+Return exec $term

    # starts a terminal in floating mode
    $mod+Shift+Return exec $term --class="floaterm"

    # start mylock rofi
    $mod+Escape exec mylock
    
    # start power menu rofi
    $mod+Shift+q exec rofi -show p -modi p:rofi-power-menu -width 20 -lines 5

    # change background
    $mod+Shift+w exec background
    
    # open browser
    $mod+w exec qutebrowser

    # color picker
    $mod+p grim -g "$(slurp -p)" -t ppm - | convert - -format '%[pixel:p{0,0}]' txt:- | tail -n 1 | cut -d ' ' -f 4 | wl-copy

    # start a network bemenu
    $mod+n exec networkmanager_bemenu
    
    # start rofi bluetooth
    $mod+b exec bemenu-bluetooth

    # start skippy-wl
    $mod+backspace exec skippy-wl
    
    # kill focused window
    $mod+q kill
    
    # system monitor
    $mod+t exec $term -e btm
    
    # file explorer
    $mod+r exec $term -e ranger
    
    # screen shot
    Print exec /usr/share/sway-git/scripts/grimshot save area

    # screen shot (whole screen)
    Shift+Print exec /usr/share/sway-git/scripts/grimshot save screen
    
    # start bemenu (a program launcher)
    $mod+d exec j4-dmenu-desktop --term=kitty --dmenu='bemenu -i -b -n -p "> " --fn "Hack Nerd Font 10" --tf "#3b84c0" --nf "#abb2bf" --nf "#282c34" --hf "#3b84c0" --nb "#1e2127" --nf "#abb2bf" --sf "#61afef" --sb "#5c6370"'

    # change focus
    $mod+h focus left
    $mod+j focus down
    $mod+k focus up
    $mod+l focus right
    $mod+u [urgent=latest] focus
    
    # alternatively, you can use the cursor keys:
    $mod+Left focus left
    $mod+Down focus down
    $mod+Up focus up
    $mod+Right focus right
    
    # move focused window
    $mod+Shift+h move left
    $mod+Shift+j move down
    $mod+Shift+k move up
    $mod+Shift+l move right
    
    # alternatively, you can use the cursor keys:
    $mod+Shift+Left move left
    $mod+Shift+Down move down
    $mod+Shift+Up move up
    $mod+Shift+Right move right
    
    # enter fullscreen mode for the focused container
    $mod+f fullscreen toggle
    
    # change container layout (stacked, tabbed, toggle split)
    $mod+s layout tabbed
    $mod+e layout toggle split
    
    # toggle tiling / floating
    $mod+Shift+space floating toggle
    
    # change focus between tiling / floating windows
    $mod+space focus mode_toggle
    
    # back and forth
    $mod+Tab workspace back_and_forth

    # focus the parent container
    $mod+a focus parent
    
    # switch to workspace
    $mod+1 workspace number 1
    $mod+2 workspace number 2
    $mod+3 workspace number 3
    $mod+4 workspace number 4
    $mod+5 workspace number 5
    $mod+6 workspace number 6
    $mod+7 workspace number 7
    $mod+8 workspace number 8
    $mod+9 workspace number 9
    $mod+0 workspace number 10
    
    # move focused container to workspace
    $mod+Shift+1 move container to workspace number 1
    $mod+Shift+2 move container to workspace number 2
    $mod+Shift+3 move container to workspace number 3
    $mod+Shift+4 move container to workspace number 4
    $mod+Shift+5 move container to workspace number 5
    $mod+Shift+6 move container to workspace number 6
    $mod+Shift+7 move container to workspace number 7
    $mod+Shift+8 move container to workspace number 8
    $mod+Shift+9 move container to workspace number 9
    $mod+Shift+0 move container to workspace number 10
    
    # resizing window by 1
    $mod+Ctrl+l resize shrink width 1 px or 1 ppt
    $mod+Ctrl+k resize grow height 1 px or 1 ppt
    $mod+Ctrl+j resize shrink height 1 px or 1 ppt
    $mod+Ctrl+h resize grow width 1 px or 1 ppt

    # reload the configuration file
    $mod+Shift+c reload
}
#: }}}

#: Key bindings (locked) {{{
bindsym --locked {
    # use volume shell script to adjust volume with amixer.
    XF86AudioRaiseVolume exec volume up
    XF86AudioLowerVolume exec volume down
    XF86AudioMute        exec volume mute

    # use microphone shell script to adjust volume with amixer.
    Shift+XF86AudioRaiseVolume exec microphone up
    Shift+XF86AudioLowerVolume exec microphone down
    XF86AudioMicMute           exec microphone mute
    
    # controls player actions
    XF86AudioPlay exec playerctl play-pause
    XF86AudioStop exec playerctl stop
    XF86AudioPrev exec playerctl previous
    XF86AudioNext exec playerctl next

    # adjusting backlight brightness
    XF86MonBrightnessUp   exec backlight up
    XF86MonBrightnessDown exec backlight down
}
#: }}}

#: Input configuration {{{
input type:keyboard {
    xkb_layout   gb
    xkb_options  altwin:swap_lalt_lwin,caps:escape
    repeat_delay 350
    repeat_rate  45
}

input type:touchpad {
    dwt                     enabled
    tap                     enabled
    natural_scroll          enabled
    events                  disabled_on_external_mouse
    scroll_method           two_finger
    click_method            clickfinger
    tap_button_map          lrm
    accel_profile           flat
    pointer_accel           0
}
#: }}}

#: Theme {{{
# class                 border  bground text    indicator child_border
client.focused          #2e6399 #2e6399 #abb2bf #2e6399   #2e6399
client.focused_inactive #5c6370 #5c6370 #abb2bf #5c6370   #5c6370
client.unfocused        #282c34 #282c34 #828997 #282c34   #282c34
client.urgent           #5c6370 #be5046 #abb2bf #be5046   #be5046
client.placeholder      #282c34 #282c34 #abb2bf #282c34   #282c34
client.background       #abb2bf
#: }}}

# include default configuration
include @sysconfdir@/sway/config.d/*
